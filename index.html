<h2>CEDYNA20</h2>

<label for="section">Select Section:</label>
<select id="section">
  <option value="">-- Select Section --</option>
  <option value="BSCE241A">BSCE241A</option>
  <option value="BSCE241B">BSCE241B</option>
</select>
<br><br>

<label for="studentNumber">Student Number:</label>
<input type="text" id="studentNumber" placeholder="Enter student number">
<br><br>

<button onclick="fetchScores()">View Scores and Running Grade</button>

<hr>

<div id="output"></div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxfbGWYtesBCD_C16-bg4bZbyVjW4MyvVhDzMWDbFwVq-DTWf2fzdruvLfTqDdjNPwuZg/exec";

async function fetchScores() {
    const section = document.getElementById("section").value;
    const studentNumber = document.getElementById("studentNumber").value.trim();

    // Clear display area
    document.getElementById("output").innerHTML = "";

    // Validate inputs
    if (!section) {
        document.getElementById("output").innerHTML = "<p style='color:red;'>Please select a section.</p>";
        return;
    }
    if (!studentNumber) {
        document.getElementById("output").innerHTML = "<p style='color:red;'>Please enter your student number.</p>";
        return;
    }

    // Build request URL
    const url = `${API_URL}?section=${encodeURIComponent(section)}&student=${encodeURIComponent(studentNumber)}`;

    try {
        const response = await fetch(url);
        const data = await response.json();

        // If API returned an error
        if (data.error) {
            document.getElementById("output").innerHTML =
                `<p style='color:red;'>${data.error}</p>`;
            return;
        }

        // Build table of results
        let html = "<table border='1' cellpadding='8' style='border-collapse:collapse;'>";
        html += "<tr><th>Field</th><th>Value</th></tr>";

        for (let key in data) {
            html += `<tr><td>${key}</td><td>${data[key]}</td></tr>`;
        }

        html += "</table>";

        document.getElementById("output").innerHTML = html;

    } catch (err) {
        document.getElementById("output").innerHTML =
            "<p style='color:red;'>Error fetching data. Please try again.</p>";
        console.error(err);
    }
}
</script>








